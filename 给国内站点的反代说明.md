# 把已备案的国内网站指向 Vercel 项目（反代说明）

发给负责国内网站/服务器的朋友时，你可以把下面这段说明直接复制过去（先填好里面的两个信息）。

---

## 你需要先提供给对方的两条信息

1. **国内要用的域名**  
   例如：`www.xxx.com` 或 `shenlun.xxx.com`（就是备案好的那个网站的访问地址）。

2. **Vercel 项目当前地址**  
   在 Vercel 里打开你的项目 → 点开最近一次部署 → 浏览器地址栏里的那一串，例如：  
   `https://shenlun-ai-mocha.vercel.app`  
   （不要带末尾的 `/`，也不要带具体路径，只要根地址。）

---

## 发给朋友的说明（复制下面整段，把括号里的内容换成实际信息）

---

你好，需要你帮忙做一件事：把咱们已备案的国内网站 **（填：具体域名，例如 www.xxx.com）** 指到我在 Vercel 上部署的前端项目，这样国内用户访问这个域名时，实际看到的是 Vercel 上的页面。

**做法：在国内服务器上用 Nginx 做反向代理。**

需要你这边：

1. **确认**：国内站点所在的服务器上已经装了 Nginx（没有的话装一下）。

2. **加一段 Nginx 配置**（或新建一个站点配置文件），内容如下。  
   请把下面两处替换成实际信息：  
   - `你的国内域名` → 改成要对外提供访问的域名（例如 `www.xxx.com`）；  
   - `Vercel 的完整地址` → 改成我发给你的 Vercel 地址（ `https://shenlun-ai-mocha.vercel.app`，不要末尾斜杠）。

```nginx
server {
    listen 80;
    server_name 你的国内域名;

    location / {
        proxy_pass https://shenlun-ai-mocha.vercel.app;
        proxy_ssl_server_name on;
        proxy_set_header Host Vercel的完整地址里的主机名;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_redirect off;
    }
}
```

**注意**：`proxy_set_header Host` 那一行填的是「Vercel 地址里的主机名」。  
例如 Vercel 地址是 `https://shenlun-ai-mocha.vercel.app`，就填：`shenlun-ai-xxxx.vercel.app`（不要带 `https://`）。

3. **重载 Nginx**：  
   `sudo nginx -t && sudo systemctl reload nginx`  
   然后访问 `http://你的国内域名` 看是否已经显示 Vercel 上的页面。

4. **HTTPS**：如果这个域名本来就有 HTTPS（证书），保持原有 443 的配置，在同一个 `server` 的 `location /` 里用上面的 `proxy_pass` 和 `proxy_set_header` 即可；如果没有，可以用 certbot 申请免费证书再配 443。

5. **防火墙**：确保服务器/安全组放行了 80 和 443 端口。

如果你们用的是其他 Web 服务器（如 Apache、Caddy），也可以做反向代理，思路一样：把该域名的请求转发到上述 Vercel 地址，并带上 Host 和 X-Forwarded-* 头。

有问题随时说，谢谢。

---

（说明结束，上面整段可以直接发给对方。）
